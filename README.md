# ğŸš€ Ø¯Ù„ÙŠÙ„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ - Screenshot OCR

## ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªØ­Ø¯ÙŠØ«Ù‡Ø§/Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§

### Android Files (ÙÙŠ `android/app/src/main/kotlin/com/example/local_ocr/`)

1. âœ… **ScreenshotForegroundService.kt** (Ø¬Ø¯ÙŠØ¯)
2. âœ… **MainActivity.kt** (Ù…Ø­Ø¯Ø«)
3. âœ… **AndroidManifest.xml** (Ù…Ø­Ø¯Ø« - ÙÙŠ `android/app/src/main/`)

### Flutter Core Files (ÙÙŠ `lib/core/`)

4. âœ… **screenshot_service.dart** (Ù…Ø­Ø¯Ø« Ø¨Ø§Ù„ÙƒØ§Ù…Ù„)
5. âœ… **ocr_queue_manager.dart** (Ø¬Ø¯ÙŠØ¯)
6. âœ… **service_locator.dart** (Ù…Ø­Ø¯Ø«)

### Cubit Files (ÙÙŠ `lib/cubit/screenshot/`)

7. âœ… **screenshot_cubit.dart** (Ù…Ø­Ø¯Ø« Ø¨Ø§Ù„ÙƒØ§Ù…Ù„)
8. âœ… **screenshot_state.dart** (Ù…Ø­Ø¯Ø«)

### Cubit Files (ÙÙŠ `lib/cubit/transaction_ocr/`)

9. âœ… **transaction_ocr_cubit.dart** (Ù…Ø­Ø¯Ø«)

### Presentation Files

10. âœ… **overlay_screen.dart** (ÙÙŠ `lib/presentation/overlay/`) - Ù…Ø­Ø¯Ø« Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
11. âœ… **screenshot_control_screen.dart** (ÙÙŠ `lib/presentation/screens/`) - Ù…Ø­Ø¯Ø«
12. âœ… **main.dart** (ÙÙŠ `lib/`) - Ù…Ø­Ø¯Ø«

---

## âš™ï¸ Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

### Ø§Ù„Ø®Ø·ÙˆØ© 1: ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```bash
cd your_project_directory
fvm flutter clean
fvm flutter pub get
```

### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ù†Ø³Ø® Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

#### Android

1. Ø§Ù†Ø³Ø® `ScreenshotForegroundService.kt` Ø¥Ù„Ù‰:

   ```
   android/app/src/main/kotlin/com/example/local_ocr/ScreenshotForegroundService.kt
   ```

2. Ø§Ø³ØªØ¨Ø¯Ù„ `MainActivity.kt` Ø¨Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

3. Ø§Ø³ØªØ¨Ø¯Ù„ `AndroidManifest.xml` Ø¨Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

#### Flutter

4. Ø§Ø³ØªØ¨Ø¯Ù„/Ø£Ù†Ø´Ø¦ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø© Ø£Ø¹Ù„Ø§Ù‡

### Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø­Ø°Ù Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

```bash
# Ø§Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
rm lib/core/ocr_processor.dart
```

### Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙˆØ§Ù„ØªØ´ØºÙŠÙ„

```bash
fvm flutter pub get
fvm flutter run
```

---

## ğŸ¯ ÙƒÙŠÙÙŠØ© Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯

### 1. Architecture Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Main Flutter App                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ScreenshotCubit                         â”‚   â”‚
â”‚  â”‚    â””â”€ ScreenshotService                  â”‚   â”‚
â”‚  â”‚         â””â”€ MethodChannel                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ScreenshotForegroundService (Kotlin)    â”‚   â”‚
â”‚  â”‚    â”œâ”€ MediaProjection (persistent)       â”‚   â”‚
â”‚  â”‚    â””â”€ Takes screenshots                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  OCRQueueManager                         â”‚   â”‚
â”‚  â”‚    â”œâ”€ Queue management                   â”‚   â”‚
â”‚  â”‚    â”œâ”€ Parallel processing (max 2)        â”‚   â”‚
â”‚  â”‚    â””â”€ Retry logic (2 attempts)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  OcrService                              â”‚   â”‚
â”‚  â”‚    â”œâ”€ Image preprocessing               â”‚   â”‚
â”‚  â”‚    â”œâ”€ Tesseract OCR (Arabic & English)  â”‚   â”‚
â”‚  â”‚    â””â”€ ML Kit (English)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  DatabaseHelper (SQLite)                 â”‚   â”‚
â”‚  â”‚    â””â”€ Store results                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†• (FlutterOverlayWindow.shareData)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Overlay (Separate Isolate)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  OverlayScreen                           â”‚   â”‚
â”‚  â”‚    â”œâ”€ Camera button                      â”‚   â”‚
â”‚  â”‚    â”œâ”€ Success/Failed counters            â”‚   â”‚
â”‚  â”‚    â””â”€ Close button                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Screenshot Flow

```
1. User presses camera button in Overlay
   â†“
2. Overlay hides itself (hideOverlay)
   â†“
3. Overlay sends request to Main App via shareData
   â†“
4. Main App calls ScreenshotService.takeScreenshot()
   â†“
5. Service calls MainActivity via MethodChannel
   â†“
6. MainActivity calls ScreenshotForegroundService
   â†“
7. Service captures screen using MediaProjection
   â†“
8. Image saved to cache directory
   â†“
9. Service notifies MainActivity (callback)
   â†“
10. MainActivity notifies Flutter via MethodChannel
    â†“
11. ScreenshotService calls onScreenshotCaptured
    â†“
12. ScreenshotCubit adds image to OCRQueueManager
    â†“
13. OCRQueueManager processes image
    â†“
14. Result saved to database
    â†“
15. Overlay shows again with updated counters
```

### 3. OCR Queue Processing

- **Max Concurrent**: 2 ØµÙˆØ± ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª
- **Retry Logic**: Ù…Ø­Ø§ÙˆÙ„ØªÙŠÙ† Ù„ÙƒÙ„ ØµÙˆØ±Ø©
- **On Success**: Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø© ÙˆØ­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø©
- **On Failure**: Ù†Ù‚Ù„ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù…Ø¬Ù„Ø¯ `failed_screenshots`

---

## ğŸ”§ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø­Ù„ÙˆÙ„Ø©

### âœ… 1. Overlay Ù„Ø§ ÙŠØ¸Ù‡Ø± Ø£Ùˆ Ù„Ø§ ÙŠØ³ØªØ¬ÙŠØ¨

**Ø§Ù„Ø­Ù„:**

- Ø§Ø³ØªØ®Ø¯Ø§Ù… `ScreenshotForegroundService` Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© Ø§Ù„Ø®Ø¯Ù…Ø©
- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù€ Overlay Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù€ Overlay Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­

### âœ… 2. MediaProjection Permission Ø¶Ø§Ø¦Ø¹

**Ø§Ù„Ø­Ù„:**

- ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¥Ø°Ù† ÙÙŠ `ForegroundService` Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙ…ÙˆØª
- Ø§Ù„Ø¥Ø°Ù† ÙŠÙØ·Ù„Ø¨ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ø®Ø¯Ù…Ø©
- ÙŠØ¨Ù‚Ù‰ Ù†Ø´Ø·Ø§Ù‹ Ø­ØªÙ‰ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø®Ø¯Ù…Ø©

### âœ… 3. OCR ÙŠØªØ¹Ø·Ù„ Ø£Ùˆ ÙŠØ¨Ø·Ø¦ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

**Ø§Ù„Ø­Ù„:**

- `OCRQueueManager` Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…ØªÙˆØ§Ø²ÙŠØ© (max 2)
- Retry logic Ù…Ø¹ ØªØ£Ø®ÙŠØ± ØªØµØ§Ø¹Ø¯ÙŠ
- Ø­Ø°Ù Ø§Ù„ØµÙˆØ± Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­ Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø­Ø©

### âœ… 4. Ø§Ù„Ù€ Overlay ÙŠØ¸Ù‡Ø± ÙÙŠ Screenshot

**Ø§Ù„Ø­Ù„:**

- Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù€ Overlay Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù„ØªÙ‚Ø§Ø· (400ms)
- Ø§Ù†ØªØ¸Ø§Ø± (600ms) Ù„Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„Ø´Ø§Ø´Ø©
- Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù€ Overlay Ù…Ø±Ø© Ø£Ø®Ø±Ù‰

### âœ… 5. Transaction Filter Ù„Ø§ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­

**Ø§Ù„Ø­Ù„:**

- ÙØµÙ„ Ù…Ù†Ø·Ù‚ Ø§Ù„ÙÙ„ØªØ±Ø© ÙÙŠ `TransactionOcrCubit`
- Ø§Ø³ØªØ®Ø¯Ø§Ù… `getFilteredTransactions()` method
- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ UI ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„ÙÙ„ØªØ±

---

## ğŸ¨ Features Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

### 1. Notification Ù…Ø³ØªÙ…Ø±

- ÙŠØ¸Ù‡Ø± Ø¥Ø´Ø¹Ø§Ø± Ø¯Ø§Ø¦Ù… Ø£Ø«Ù†Ø§Ø¡ Ø¹Ù…Ù„ Ø§Ù„Ø®Ø¯Ù…Ø©
- ÙŠØ¹Ø±Ø¶ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª (Ù†Ø§Ø¬Ø­/ÙØ§Ø´Ù„)
- Ø²Ø± Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø®Ø¯Ù…Ø© Ù…Ø¨Ø§Ø´Ø±Ø©

### 2. Queue Info Card

- Ø¹Ø±Ø¶ Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
- Ø¹Ø±Ø¶ Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
- ØªØ­Ø¯ÙŠØ« Ù„Ø­Ø¸ÙŠ

### 3. Enhanced Overlay

- ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯ Ø§Ø­ØªØ±Ø§ÙÙŠ
- Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù„ÙˆÙ†Ø©
- Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ ÙˆØ§Ø¶Ø­
- Ø±Ø³Ø§Ø¦Ù„ Ø£Ø®Ø·Ø§Ø¡ ÙˆØ§Ø¶Ø­Ø©

### 4. Better Error Handling

- Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø´Ø§Ø°Ø©
- Retry logic ØªÙ„Ù‚Ø§Ø¦ÙŠ

---

## âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

### 1. Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

```xml
<uses-permission android:name="android.permission.FOREGROUND_SERVICE"/>
<uses-permission android:name="android.permission.FOREGROUND_SERVICE_MEDIA_PROJECTION"/>
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/>
<uses-permission android:name="android.permission.POST_NOTIFICATIONS"/>
```

### 2. Android 13+ (API 33+)

- ÙŠØªØ·Ù„Ø¨ Ø¥Ø°Ù† `POST_NOTIFICATIONS` Ø¨Ø´ÙƒÙ„ ØµØ±ÙŠØ­
- ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

### 3. Battery Optimization

- Ù‚Ø¯ ÙŠØ·Ù„Ø¨ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª
- ÙŠÙÙ†ØµØ­ Ø¨Ø¥Ø®Ø¨Ø§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø°Ù„Ùƒ

### 4. Memory Management

- Ø§Ù„ØµÙˆØ± ÙŠØªÙ… Ø­Ø°ÙÙ‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­
- Ø§Ù„ØµÙˆØ± Ø§Ù„ÙØ§Ø´Ù„Ø© ØªÙØ­ÙØ¸ ÙÙŠ `failed_screenshots/`
- ÙŠÙÙ†ØµØ­ Ø¨ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ

---

## ğŸ› Troubleshooting

### Problem: Overlay Ù„Ø§ ÙŠØ¸Ù‡Ø±

**Solution:**

1. ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø°Ù† `SYSTEM_ALERT_WINDOW`
2. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
3. Ø§Ù…Ø³Ø­ Ø§Ù„Ù€ cache: `flutter clean`

### Problem: Screenshot ÙØ§Ø±Øº/Ø£Ø³ÙˆØ¯

**Solution:**

1. ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ù†Ø­ Ø¥Ø°Ù† `MediaProjection`
2. ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± "Entire Screen"
3. Ø²ÙŠØ§Ø¯Ø© ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ (Ù…Ù† 300ms Ø¥Ù„Ù‰ 500ms)

### Problem: OCR Ø¨Ø·ÙŠØ¡ Ø¬Ø¯Ø§Ù‹

**Solution:**

1. Ù‚Ù„Ù„ `MAX_CONCURRENT` ÙÙŠ `OCRQueueManager`
2. ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ± (Ù‚Ø¯ ØªØ­ØªØ§Ø¬ ØªØµØºÙŠØ±)
3. Ø±Ø§Ø¬Ø¹ `_preprocessImage` ÙÙŠ `OcrService`

### Problem: Ø§Ù„Ø®Ø¯Ù…Ø© ØªØªÙˆÙ‚Ù ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©

**Solution:**

1. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù€ notification Ø¸Ø§Ù‡Ø±
2. Ø£Ø¶Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©
3. ØªØ£ÙƒØ¯ Ù…Ù† `START_STICKY` ÙÙŠ Service

---

## ğŸ“Š Testing Checklist

- [ ] Ø¨Ø¯Ø¡ Ø§Ù„Ø®Ø¯Ù…Ø© ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­
- [ ] Ø§Ù„Ù€ Overlay ÙŠØ¸Ù‡Ø± ÙˆÙŠØ®ØªÙÙŠ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
- [ ] Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„Ø´Ø§Ø´Ø© ÙŠØ¹Ù…Ù„ (Ø§Ù„Ù€ Overlay Ù„Ø§ ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„ØµÙˆØ±Ø©)
- [ ] OCR ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
- [ ] Ø§Ù„ÙÙ„Ø§ØªØ± ÙÙŠ TransactionsScreen ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
- [ ] Ø§Ù„ØµÙˆØ± Ø§Ù„Ù†Ø§Ø¬Ø­Ø© ØªÙØ­Ø°Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- [ ] Ø§Ù„ØµÙˆØ± Ø§Ù„ÙØ§Ø´Ù„Ø© ØªØ¸Ù‡Ø± ÙÙŠ ÙÙ„ØªØ± "ÙØ§Ø´Ù„"
- [ ] Retry Ù„Ù„ØµÙˆØ± Ø§Ù„ÙØ§Ø´Ù„Ø© ÙŠØ¹Ù…Ù„
- [ ] Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙŠÙØ­Ø¯Ù‘Ø« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
- [ ] Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø®Ø¯Ù…Ø© ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„
- [ ] Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ø§ ÙŠØªØ¹Ø·Ù„ Ø£Ùˆ ÙŠØªØ¬Ù…Ø¯

---

## ğŸ“ Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†

### Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù€ Overlay

```dart
// ÙÙŠ overlay_screen.dart
FlutterOverlayWindow.shareData({
  'action': 'your_custom_action',
  'data': yourData,
});

// ÙÙŠ main.dart
void _listenToOverlayRequests() {
  FlutterOverlayWindow.overlayListener.listen((data) async {
    if (data['action'] == 'your_custom_action') {
      // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨
    }
  });
}
```

### ØªØºÙŠÙŠØ± Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠØ©

```dart
// ÙÙŠ ocr_queue_manager.dart
static const int MAX_CONCURRENT = 3; // ØºÙŠÙ‘Ø± Ù…Ù† 2 Ø¥Ù„Ù‰ 3
```

### Ø¥Ø¶Ø§ÙØ© callback Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù€ Queue

```dart
// ÙÙŠ main.dart - _setupOCRQueueCallbacks()
queueManager.onQueueChanged = (queueLength) {
  // ÙØ¹Ù„ Ø´ÙŠØ¡ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
};
```

---

## ğŸ“ Support

Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ø£ÙŠ Ù…Ø´Ø§ÙƒÙ„:

1. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù€ logs: `flutter logs` Ø£Ùˆ `adb logcat`
2. ØªØ£ÙƒØ¯ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ù…Ù…Ù†ÙˆØ­Ø©
3. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø¹Ø¯ Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„Ø§Øª

---

**ØªÙ… Ø¨Ø­Ù…Ø¯ Ø§Ù„Ù„Ù‡ âœ…**

Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¢Ù† Ù…ØªÙƒØ§Ù…Ù„ ÙˆÙ…Ø³ØªÙ‚Ø± ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…! ğŸš€
